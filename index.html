<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EtherSniper | Top 100 AI Monitor</title>
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics-compat.js"></script>

    <style>
        /* --- DESIGN SYSTEM DE ELITE --- */
        :root { 
            --primary: #F0B90B; /* Binance Yellow */
            --bg-dark: #0B0E11; 
            --bg-card: #1E2329; 
            --text-main: #EAECEF; 
            --text-sub: #848E9C;
            --green: #0ECB81; 
            --red: #F6465D; 
            --border: #2B3139;
        }

        body { margin: 0; font-family: 'Inter', sans-serif; background-color: var(--bg-dark); color: var(--text-main); height: 100vh; display: flex; overflow: hidden; }

        /* SCROLLBAR MODERNA */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: var(--bg-dark); }
        ::-webkit-scrollbar-thumb { background: #474D57; border-radius: 4px; }

        /* --- TELA DE LOGIN --- */
        #login-screen { position: fixed; inset: 0; background: var(--bg-dark); z-index: 2000; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        .login-card { background: var(--bg-card); padding: 40px; border-radius: 16px; width: 340px; text-align: center; border: 1px solid var(--border); box-shadow: 0 20px 50px rgba(0,0,0,0.5); }
        .login-input { width: 100%; padding: 12px; margin: 8px 0; background: #2B3139; border: 1px solid #474D57; color: white; border-radius: 4px; box-sizing: border-box; font-size: 14px; }
        .btn-action { width: 100%; padding: 12px; background: var(--primary); border: none; font-weight: 700; cursor: pointer; border-radius: 4px; margin-top: 15px; color: #1e2329; transition: 0.2s; font-size: 14px; }
        .btn-action:hover { background: #d4a406; transform: translateY(-1px); }

        /* --- SIDEBAR --- */
        .sidebar { width: 260px; background: var(--bg-card); border-right: 1px solid var(--border); display: flex; flex-direction: column; z-index: 10; }
        .logo-area { padding: 30px 25px; font-size: 20px; font-weight: 800; color: var(--text-main); border-bottom: 1px solid var(--border); display: flex; align-items: center; gap: 12px; }
        .logo-icon { color: var(--primary); font-size: 24px; }
        .menu { flex: 1; padding: 20px 0; }
        .menu-item { padding: 14px 25px; cursor: pointer; color: var(--text-sub); display: flex; align-items: center; gap: 15px; transition: 0.2s; font-size: 15px; font-weight: 500; }
        .menu-item:hover, .menu-item.active { background: #2B3139; color: var(--primary); border-right: 3px solid var(--primary); }
        .user-status { padding: 20px; border-top: 1px solid var(--border); font-size: 12px; color: var(--text-sub); text-align: center; }

        /* --- CONTE√öDO PRINCIPAL --- */
        .main-content { flex: 1; padding: 30px; overflow-y: auto; position: relative; }
        
        /* DASHBOARD HEADER */
        .header-grid { display: grid; grid-template-columns: 1fr 1fr 1.5fr; gap: 20px; margin-bottom: 30px; }
        .stat-card { background: var(--bg-card); border-radius: 12px; padding: 25px; border: 1px solid var(--border); position: relative; display: flex; flex-direction: column; justify-content: center; }
        .stat-label { font-size: 12px; color: var(--text-sub); text-transform: uppercase; letter-spacing: 1px; font-weight: 600; margin-bottom: 8px; }
        .stat-value { font-size: 32px; font-weight: 700; letter-spacing: -0.5px; }
        .stat-sub { font-size: 13px; margin-top: 5px; font-weight: 500; }
        
        /* TABELA TOP 100 */
        .market-section { background: var(--bg-card); border-radius: 12px; border: 1px solid var(--border); overflow: hidden; display: flex; flex-direction: column; height: 60vh; }
        .market-header { padding: 20px 25px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; background: #252A33; }
        .table-wrapper { flex: 1; overflow-y: auto; }
        table { width: 100%; border-collapse: collapse; }
        thead th { position: sticky; top: 0; background: #1E2329; color: var(--text-sub); text-align: left; padding: 15px 25px; font-size: 12px; font-weight: 600; border-bottom: 2px solid var(--border); z-index: 1; }
        td { padding: 12px 25px; border-bottom: 1px solid var(--border); font-size: 14px; font-weight: 500; }
        tr:hover { background: #252A33; }
        
        .coin-info { display: flex; align-items: center; gap: 12px; }
        .coin-icon { width: 28px; height: 28px; border-radius: 50%; background: #2B3139; display: flex; align-items: center; justify-content: center; font-size: 10px; font-weight: bold; color: var(--text-sub); }
        .badge { padding: 4px 8px; border-radius: 4px; font-size: 11px; font-weight: 700; text-transform: uppercase; }
        .badge-buy { background: rgba(14, 203, 129, 0.15); color: var(--green); }
        .badge-sell { background: rgba(246, 70, 93, 0.15); color: var(--red); }
        .badge-wait { background: rgba(132, 142, 156, 0.15); color: var(--text-sub); }

        /* LOGS */
        .logs-overlay { position: fixed; bottom: 30px; right: 30px; width: 320px; max-height: 200px; overflow-y: auto; background: rgba(30, 35, 41, 0.95); border: 1px solid var(--primary); border-radius: 8px; padding: 15px; z-index: 100; backdrop-filter: blur(5px); box-shadow: 0 10px 30px rgba(0,0,0,0.5); font-family: 'Consolas', monospace; font-size: 12px; }
        .log-entry { margin-bottom: 6px; padding-bottom: 6px; border-bottom: 1px solid rgba(255,255,255,0.1); color: var(--text-sub); display: flex; gap: 8px; }
        .log-time { color: var(--primary); font-weight: bold; }

        /* ANIMA√á√ïES */
        .pulse { animation: pulse-animation 2s infinite; }
        @keyframes pulse-animation { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }
    </style>
</head>
<body>

    <div id="login-screen">
        <div class="login-card">
            <div style="font-size: 40px; color: var(--primary); margin-bottom: 10px;"><i class="fas fa-crosshairs"></i></div>
            <h2 style="margin: 0 0 10px 0; color: white;">EtherSniper Pro</h2>
            <p style="color: var(--text-sub); font-size: 13px; margin-bottom: 30px;">Ambiente Seguro | Criptografia End-to-End</p>
            
            <input type="email" id="email" class="login-input" placeholder="Admin E-mail">
            <input type="password" id="password" class="login-input" placeholder="Senha de Acesso">
            <button class="btn-action" onclick="fazerLogin()">ACESSAR SISTEMA</button>
            <p id="login-msg" style="color: var(--red); font-size: 12px; margin-top: 15px; min-height: 15px;"></p>
        </div>
    </div>

    <div class="sidebar" id="sidebar" style="display: none;">
        <div class="logo-area">
            <i class="fas fa-crosshairs logo-icon"></i> EtherSniper
        </div>
        <div class="menu">
            <div class="menu-item active"><i class="fas fa-th-large"></i> Dashboard Top 100</div>
            <div class="menu-item"><i class="fas fa-robot"></i> Configura√ß√£o IA</div>
            <div class="menu-item"><i class="fas fa-history"></i> Hist√≥rico de Ordens</div>
            <div class="menu-item"><i class="fas fa-wallet"></i> Carteira Spot</div>
        </div>
        <div class="user-status">
            <div class="pulse" style="color: var(--green); margin-bottom: 5px;">‚óè Sistema Online</div>
            <span id="user-email">Conectando...</span>
        </div>
    </div>

    <div class="main-content" id="app-content" style="display: none;">
        
        <div class="header-grid">
            <div class="stat-card">
                <div class="stat-label">Banca Total (Simulada)</div>
                <div class="stat-value" id="banca-display">R$ 1.500,00</div>
                <div class="stat-sub" style="color: var(--text-sub)">Capital Dispon√≠vel</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Lucro da Sess√£o</div>
                <div class="stat-value" id="lucro-display" style="color: var(--green)">+R$ 0,00</div>
                <div class="stat-sub" style="color: var(--green)">‚ñ≤ 0.00%</div>
            </div>
            <div class="stat-card" style="background: linear-gradient(135deg, #1E2329 0%, #161A1E 100%); border-color: var(--primary);">
                <div class="stat-label" style="color: var(--primary)">Status da IA</div>
                <div class="stat-value" style="font-size: 24px;">Analisando Top 100</div>
                <div class="stat-sub pulse" style="color: var(--primary)">‚óè Escaneando oportunidades em tempo real...</div>
            </div>
        </div>

        <div class="market-section">
            <div class="market-header">
                <span style="font-weight: 700; color: white;">MERCADO EM TEMPO REAL (TOP 100)</span>
                <span style="font-size: 12px; color: var(--text-sub);">Atualiza√ß√£o: <span style="color: var(--green)">Ao vivo</span></span>
            </div>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>ATIVO</th>
                            <th>PRE√áO (BRL)</th>
                            <th>VARIA√á√ÉO 24H</th>
                            <th>VOLUME</th>
                            <th>IA DECIS√ÉO</th>
                        </tr>
                    </thead>
                    <tbody id="tabela-top100">
                        </tbody>
                </table>
            </div>
        </div>

        <div class="logs-overlay" id="logs-container">
            <div style="font-weight: bold; color: white; margin-bottom: 10px; border-bottom: 1px solid #444; padding-bottom: 5px;">
                <i class="fas fa-terminal"></i> Terminal da IA
            </div>
            </div>

    </div>

    <script>
        // ==========================================
        // 1. CONFIGURA√á√ÉO FIREBASE (SEUS DADOS REAIS)
        // ==========================================
        const firebaseConfig = {
            apiKey: "AIzaSyAx9DPXLOCvJmgRRKlladRC-NRbxJmj0SE",
            authDomain: "ethersniper.firebaseapp.com",
            projectId: "ethersniper",
            storageBucket: "ethersniper.firebasestorage.app",
            messagingSenderId: "68071456710",
            appId: "1:68071456710:web:053ce6921ea0de77c57cc7",
            measurementId: "G-19282VJVDM"
        };

        // Inicializa√ß√£o
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        const analytics = firebase.analytics();

        // ==========================================
        // 2. SISTEMA DE LOGIN INTELIGENTE
        // ==========================================
        function fazerLogin() {
            const email = document.getElementById('email').value;
            const pass = document.getElementById('password').value;
            const msg = document.getElementById('login-msg');

            msg.innerText = "Autenticando...";

            auth.signInWithEmailAndPassword(email, pass)
                .then(() => iniciarSistema(email))
                .catch((error) => {
                    // Auto-cadastro para facilitar seu teste
                    if(error.code === 'auth/user-not-found') {
                        msg.innerText = "Criando conta de Admin...";
                        auth.createUserWithEmailAndPassword(email, pass)
                            .then(() => iniciarSistema(email));
                    } else {
                        msg.innerText = "Erro: " + error.message;
                    }
                });
        }

        function iniciarSistema(email) {
            document.getElementById('login-screen').style.display = 'none';
            document.getElementById('sidebar').style.display = 'flex';
            document.getElementById('app-content').style.display = 'block';
            document.getElementById('user-email').innerText = email;
            
            addLog("Sistema iniciado. Conex√£o segura estabelecida.");
            addLog("Buscando chaves da Binance no cofre...");
            
            // Simula verifica√ß√£o segura das chaves
            setTimeout(() => {
                db.collection("segredos").doc("binance").get().then((doc) => {
                    if (doc.exists) {
                        addLog("‚úÖ Chaves API validadas com sucesso.");
                        gerarTop100Inicial(); // Cria as moedas
                        setInterval(atualizarMercado, 2000); // Inicia o loop do mercado
                    } else {
                        addLog("‚ö†Ô∏è Chaves n√£o encontradas. Rodando modo simula√ß√£o.");
                        gerarTop100Inicial();
                        setInterval(atualizarMercado, 2000);
                    }
                });
            }, 1000);
        }

        // ==========================================
        // 3. MOTOR TOP 100 E INTELIG√äNCIA ARTIFICIAL
        // ==========================================
        
        let moedas = [];
        let banca = 1500.00;
        let lucroTotal = 0;

        // Gera 100 moedas fict√≠cias baseadas nas reais para simula√ß√£o
        function gerarTop100Inicial() {
            const principais = ["BTC", "ETH", "BNB", "XRP", "ADA", "SOL", "DOGE", "DOT", "MATIC", "LTC"];
            
            for (let i = 0; i < 100; i++) {
                let nome = i < 10 ? principais[i] : `COIN-${i+1}`;
                let precoBase = Math.random() * 1000 + 10;
                if(nome === "BTC") precoBase = 350000;
                if(nome === "ETH") precoBase = 18000;
                
                moedas.push({
                    simbolo: nome,
                    preco: precoBase,
                    variacao: (Math.random() * 4) - 2, // -2% a +2%
                    status: "Aguardando"
                });
            }
            renderizarTabela();
        }

        function atualizarMercado() {
            // Atualiza pre√ßos e roda a IA
            moedas.forEach(m => {
                // Flutua√ß√£o aleat√≥ria de mercado
                let move = (Math.random() * 0.8) - 0.4; 
                m.variacao += move;
                m.preco = m.preco * (1 + (move / 100));

                // L√≥gica de Sniper
                if (m.variacao < -2.5) {
                    m.status = "COMPRA";
                    executarTrade(m, "COMPRA");
                } else if (m.variacao > 2.5) {
                    m.status = "VENDA";
                    executarTrade(m, "VENDA");
                } else {
                    m.status = "Neutro";
                }
            });
            renderizarTabela();
        }

        function executarTrade(moeda, tipo) {
            // Evita spam de logs
            if (Math.random() > 0.1) return; 

            if (tipo === "VENDA") {
                let lucroOp = (Math.random() * 15) + 5; // Lucro entre R$5 e R$20
                banca += lucroOp;
                lucroTotal += lucroOp;
                
                // Atualiza Header
                document.getElementById('banca-display').innerText = `R$ ${banca.toFixed(2)}`;
                document.getElementById('lucro-display').innerText = `+R$ ${lucroTotal.toFixed(2)}`;
                
                addLog(`üí∞ LUCRO: Vendeu ${moeda.simbolo}. Ganho: R$ ${lucroOp.toFixed(2)}`);
                
                // Reseta a varia√ß√£o para n√£o vender de novo imediatamente
                moeda.variacao = 0;
            } else {
                addLog(`üéØ SNIPER: Comprou ${moeda.simbolo} na baixa.`);
                moeda.variacao = 0;
            }
        }

        // ==========================================
        // 4. RENDERIZA√á√ÉO VISUAL (UI)
        // ==========================================
        function renderizarTabela() {
            const tbody = document.getElementById('tabela-top100');
            let html = "";

            // Mostra apenas as top 15 vis√≠veis para n√£o travar o navegador, mas processa as 100 no fundo
            moedas.slice(0, 20).forEach(m => {
                let corVar = m.variacao >= 0 ? "#0ECB81" : "#F6465D";
                let badgeClass = m.status === "COMPRA" ? "badge-buy" : (m.status === "VENDA" ? "badge-sell" : "badge-wait");
                let iconText = m.status === "COMPRA" ? "COMPRAR" : (m.status === "VENDA" ? "LUCRO" : "AN√ÅLISE");

                html += `
                    <tr>
                        <td>
                            <div class="coin-info">
                                <div class="coin-icon">${m.simbolo.substring(0,1)}</div>
                                <span style="font-weight:700; color:white">${m.simbolo}</span>
                            </div>
                        </td>
                        <td>R$ ${m.preco.toFixed(2)}</td>
                        <td style="color: ${corVar}">${m.variacao.toFixed(2)}%</td>
                        <td style="color: #848E9C">R$ ${(Math.random()*100).toFixed(1)}M</td>
                        <td><span class="badge ${badgeClass}">${iconText}</span></td>
                    </tr>
                `;
            });
            tbody.innerHTML = html;
        }

        function addLog(texto) {
            const container = document.getElementById('logs-container');
            const time = new Date().toLocaleTimeString();
            const div = document.createElement('div');
            div.className = 'log-entry';
            div.innerHTML = `<span class="log-time">[${time}]</span> <span>${texto}</span>`;
            container.appendChild(div);
            container.scrollTop = container.scrollHeight;
        }
    </script>
</body>
</html>
